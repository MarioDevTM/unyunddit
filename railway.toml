[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
healthcheckPath = "/"
healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
numReplicas = 1
sleepApplication = false

[[deploy.volumes]]
name = "tor-keys"
mountPath = "/var/lib/tor"

[[deploy.variables]]
name = "NODE_ENV"
value = "production"

[[deploy.variables]]
name = "PORT"
value = "8000"

[[deploy.variables]]
name = "NGINX_PORT"
value = "8080"

# Supabase environment variables (set these in Railway dashboard)
# SUPABASE_URL
# SUPABASE_ANON_KEY
# SUPABASE_SERVICE_ROLE_KEY